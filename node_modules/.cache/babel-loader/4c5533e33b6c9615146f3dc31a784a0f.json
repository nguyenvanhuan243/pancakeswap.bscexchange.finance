{"ast":null,"code":"import { ethers } from 'ethers';\nimport { BetPosition } from 'state/types';\nimport { formatBigNumber, formatBigNumberToFixed } from 'utils/formatBalance';\nimport getTimePeriods from 'utils/getTimePeriods';\nexport const formatUsdv2 = usd => {\n  return `$${formatBigNumberToFixed(usd, 3, 8)}`;\n};\nexport const formatBnbv2 = bnb => {\n  const value = bnb || ethers.BigNumber.from(0);\n  return formatBigNumberToFixed(value, 4);\n};\nexport const padTime = num => num.toString().padStart(2, '0');\nexport const formatRoundTime = secondsBetweenBlocks => {\n  const {\n    hours,\n    minutes,\n    seconds\n  } = getTimePeriods(secondsBetweenBlocks);\n  const minutesSeconds = `${padTime(minutes)}:${padTime(seconds)}`;\n\n  if (hours > 0) {\n    return `${padTime(hours)}:${minutesSeconds}`;\n  }\n\n  return minutesSeconds;\n};\nexport const getHasRoundFailed = (round, buffer) => {\n  const closeTimestampMs = (round.closeTimestamp + buffer) * 1000;\n  const now = Date.now();\n\n  if (closeTimestampMs !== null && now > closeTimestampMs && !round.oracleCalled) {\n    return true;\n  }\n\n  return false;\n};\nexport const getMultiplierv2 = (total, amount) => {\n  if (!total) {\n    return ethers.FixedNumber.from(0);\n  }\n\n  if (total.eq(0) || amount.eq(0)) {\n    return ethers.FixedNumber.from(0);\n  }\n\n  const rewardAmountFixed = ethers.FixedNumber.from(total);\n  const multiplierAmountFixed = ethers.FixedNumber.from(amount);\n  return rewardAmountFixed.divUnsafe(multiplierAmountFixed);\n};\nexport const getPayoutv2 = (ledger, round) => {\n  if (!ledger || !round) {\n    return ethers.FixedNumber.from(0);\n  }\n\n  const {\n    bullAmount,\n    bearAmount,\n    rewardAmount\n  } = round;\n  const {\n    amount,\n    position\n  } = ledger;\n  const amountFixed = ethers.FixedNumber.from(formatBigNumber(amount));\n  const multiplier = getMultiplierv2(rewardAmount, position === BetPosition.BULL ? bullAmount : bearAmount);\n  return amountFixed.mulUnsafe(multiplier);\n};\nexport const getNetPayoutv2 = (ledger, round) => {\n  if (!ledger || !round) {\n    return ethers.FixedNumber.from(0);\n  }\n\n  const payout = getPayoutv2(ledger, round);\n  const amount = ethers.FixedNumber.from(formatBigNumber(ledger.amount));\n  return payout.subUnsafe(amount);\n};\nexport const getPriceDifference = (price, lockPrice) => {\n  if (!price || !lockPrice) {\n    return ethers.BigNumber.from(0);\n  }\n\n  return price.sub(lockPrice);\n};","map":{"version":3,"sources":["/Users/nguyenvanhuan243/Documents/pancake-frontend/src/views/Predictions/helpers.ts"],"names":["ethers","BetPosition","formatBigNumber","formatBigNumberToFixed","getTimePeriods","formatUsdv2","usd","formatBnbv2","bnb","value","BigNumber","from","padTime","num","toString","padStart","formatRoundTime","secondsBetweenBlocks","hours","minutes","seconds","minutesSeconds","getHasRoundFailed","round","buffer","closeTimestampMs","closeTimestamp","now","Date","oracleCalled","getMultiplierv2","total","amount","FixedNumber","eq","rewardAmountFixed","multiplierAmountFixed","divUnsafe","getPayoutv2","ledger","bullAmount","bearAmount","rewardAmount","position","amountFixed","multiplier","BULL","mulUnsafe","getNetPayoutv2","payout","subUnsafe","getPriceDifference","price","lockPrice","sub"],"mappings":"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","sourcesContent":["import { ethers } from 'ethers'\nimport { BetPosition, NodeLedger, NodeRound } from 'state/types'\nimport { formatBigNumber, formatBigNumberToFixed } from 'utils/formatBalance'\nimport getTimePeriods from 'utils/getTimePeriods'\n\nexport const formatUsdv2 = (usd: ethers.BigNumber) => {\n  return `$${formatBigNumberToFixed(usd, 3, 8)}`\n}\n\nexport const formatBnbv2 = (bnb: ethers.BigNumber) => {\n  const value = bnb || ethers.BigNumber.from(0)\n  return formatBigNumberToFixed(value, 4)\n}\n\nexport const padTime = (num: number) => num.toString().padStart(2, '0')\n\nexport const formatRoundTime = (secondsBetweenBlocks: number) => {\n  const { hours, minutes, seconds } = getTimePeriods(secondsBetweenBlocks)\n  const minutesSeconds = `${padTime(minutes)}:${padTime(seconds)}`\n\n  if (hours > 0) {\n    return `${padTime(hours)}:${minutesSeconds}`\n  }\n\n  return minutesSeconds\n}\n\nexport const getHasRoundFailed = (round: NodeRound, buffer: number) => {\n  const closeTimestampMs = (round.closeTimestamp + buffer) * 1000\n  const now = Date.now()\n\n  if (closeTimestampMs !== null && now > closeTimestampMs && !round.oracleCalled) {\n    return true\n  }\n\n  return false\n}\n\nexport const getMultiplierv2 = (total: ethers.BigNumber, amount: ethers.BigNumber) => {\n  if (!total) {\n    return ethers.FixedNumber.from(0)\n  }\n\n  if (total.eq(0) || amount.eq(0)) {\n    return ethers.FixedNumber.from(0)\n  }\n\n  const rewardAmountFixed = ethers.FixedNumber.from(total)\n  const multiplierAmountFixed = ethers.FixedNumber.from(amount)\n\n  return rewardAmountFixed.divUnsafe(multiplierAmountFixed)\n}\n\nexport const getPayoutv2 = (ledger: NodeLedger, round: NodeRound) => {\n  if (!ledger || !round) {\n    return ethers.FixedNumber.from(0)\n  }\n\n  const { bullAmount, bearAmount, rewardAmount } = round\n  const { amount, position } = ledger\n\n  const amountFixed = ethers.FixedNumber.from(formatBigNumber(amount))\n  const multiplier = getMultiplierv2(rewardAmount, position === BetPosition.BULL ? bullAmount : bearAmount)\n  return amountFixed.mulUnsafe(multiplier)\n}\n\nexport const getNetPayoutv2 = (ledger: NodeLedger, round: NodeRound) => {\n  if (!ledger || !round) {\n    return ethers.FixedNumber.from(0)\n  }\n\n  const payout = getPayoutv2(ledger, round)\n  const amount = ethers.FixedNumber.from(formatBigNumber(ledger.amount))\n\n  return payout.subUnsafe(amount)\n}\n\nexport const getPriceDifference = (price: ethers.BigNumber, lockPrice: ethers.BigNumber) => {\n  if (!price || !lockPrice) {\n    return ethers.BigNumber.from(0)\n  }\n\n  return price.sub(lockPrice)\n}\n"]},"metadata":{},"sourceType":"module"}