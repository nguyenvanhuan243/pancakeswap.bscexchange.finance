{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nguyenvanhuan243/Documents/apphocvienstock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nguyenvanhuan243/Documents/apphocvienstock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nguyenvanhuan243/Documents/apphocvienstock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/nguyenvanhuan243/Documents/apphocvienstock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState,useEffect}from'react';import styled from'styled-components';import{Flex,Text,Skeleton,Link,Button,ArrowForwardIcon,Heading}from'@pancakeswap/uikit';import{useTranslation}from'contexts/Localization';import{formatLocalisedCompactNumber}from'utils/formatBalance';import useRefresh from'hooks/useRefresh';import useIntersectionObserver from'hooks/useIntersectionObserver';import{getTotalWon}from'state/predictions/helpers';import{usePriceBnbBusd}from'state/farms/hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var StyledLink=styled(Link)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n\"])));var PredictionCardContent=function PredictionCardContent(){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useRefresh=useRefresh(),slowRefresh=_useRefresh.slowRefresh;var _useIntersectionObser=useIntersectionObserver(),observerRef=_useIntersectionObser.observerRef,isIntersecting=_useIntersectionObser.isIntersecting;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadData=_useState2[0],setLoadData=_useState2[1];var bnbBusdPrice=usePriceBnbBusd();var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),bnbWon=_useState4[0],setBnbWon=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),bnbWonInUsd=_useState6[0],setBnbWonInUsd=_useState6[1];var localisedBnbUsdString=formatLocalisedCompactNumber(bnbWonInUsd);var bnbWonText=t('$%bnbWonInUsd% in BNB won so far',{bnbWonInUsd:localisedBnbUsdString});var _bnbWonText$split=bnbWonText.split(localisedBnbUsdString),_bnbWonText$split2=_slicedToArray(_bnbWonText$split,2),pretext=_bnbWonText$split2[0],wonSoFar=_bnbWonText$split2[1];useEffect(function(){if(isIntersecting){setLoadData(true);}},[isIntersecting]);useEffect(function(){var fetchMarketData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var totalWon;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getTotalWon();case 2:totalWon=_context.sent;setBnbWon(totalWon);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchMarketData(){return _ref.apply(this,arguments);};}();if(loadData){fetchMarketData();}},[slowRefresh,loadData]);useEffect(function(){if(bnbBusdPrice.gt(0)&&bnbWon>0){setBnbWonInUsd(bnbBusdPrice.times(bnbWon).toNumber());}},[bnbBusdPrice,bnbWon]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",mt:\"48px\",children:[/*#__PURE__*/_jsx(\"div\",{ref:observerRef}),/*#__PURE__*/_jsx(Text,{color:\"#280D5F\",bold:true,fontSize:\"16px\",children:t('Prediction')}),bnbWonInUsd?/*#__PURE__*/_jsxs(Heading,{color:\"#280D5F\",my:\"8px\",scale:\"xl\",bold:true,children:[pretext,localisedBnbUsdString]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Skeleton,{width:230,height:40,my:\"8px\"}),/*#__PURE__*/_jsx(\"div\",{ref:observerRef})]}),/*#__PURE__*/_jsx(Text,{color:\"#280D5F\",mb:\"24px\",bold:true,fontSize:\"16px\",children:wonSoFar}),/*#__PURE__*/_jsx(Text,{color:\"#280D5F\",mb:\"40px\",children:t('Will BNB price rise or fall? guess correctly to win!')})]}),/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",justifyContent:\"center\",children:/*#__PURE__*/_jsx(StyledLink,{href:\"/prediction\",id:\"homepage-prediction-cta\",children:/*#__PURE__*/_jsxs(Button,{width:\"100%\",children:[/*#__PURE__*/_jsx(Text,{bold:true,color:\"invertedContrast\",children:t('Play')}),/*#__PURE__*/_jsx(ArrowForwardIcon,{ml:\"4px\",color:\"invertedContrast\"})]})})})]});};export default PredictionCardContent;","map":{"version":3,"sources":["/Users/nguyenvanhuan243/Documents/apphocvienstock/src/views/Home/components/WinSection/PredictionCardContent.tsx"],"names":["React","useState","useEffect","styled","Flex","Text","Skeleton","Link","Button","ArrowForwardIcon","Heading","useTranslation","formatLocalisedCompactNumber","useRefresh","useIntersectionObserver","getTotalWon","usePriceBnbBusd","StyledLink","PredictionCardContent","t","slowRefresh","observerRef","isIntersecting","loadData","setLoadData","bnbBusdPrice","bnbWon","setBnbWon","bnbWonInUsd","setBnbWonInUsd","localisedBnbUsdString","bnbWonText","split","pretext","wonSoFar","fetchMarketData","totalWon","gt","times","toNumber"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { Flex, Text, Skeleton, Link, Button, ArrowForwardIcon, Heading } from '@pancakeswap/uikit'\nimport { useTranslation } from 'contexts/Localization'\nimport { formatLocalisedCompactNumber } from 'utils/formatBalance'\nimport useRefresh from 'hooks/useRefresh'\nimport useIntersectionObserver from 'hooks/useIntersectionObserver'\nimport { getTotalWon } from 'state/predictions/helpers'\nimport { usePriceBnbBusd } from 'state/farms/hooks'\n\nconst StyledLink = styled(Link)`\n  width: 100%;\n`\n\nconst PredictionCardContent = () => {\n  const { t } = useTranslation()\n  const { slowRefresh } = useRefresh()\n  const { observerRef, isIntersecting } = useIntersectionObserver()\n  const [loadData, setLoadData] = useState(false)\n  const bnbBusdPrice = usePriceBnbBusd()\n  const [bnbWon, setBnbWon] = useState(0)\n  const [bnbWonInUsd, setBnbWonInUsd] = useState(0)\n\n  const localisedBnbUsdString = formatLocalisedCompactNumber(bnbWonInUsd)\n  const bnbWonText = t('$%bnbWonInUsd% in BNB won so far', { bnbWonInUsd: localisedBnbUsdString })\n  const [pretext, wonSoFar] = bnbWonText.split(localisedBnbUsdString)\n\n  useEffect(() => {\n    if (isIntersecting) {\n      setLoadData(true)\n    }\n  }, [isIntersecting])\n\n  useEffect(() => {\n    const fetchMarketData = async () => {\n      const totalWon = await getTotalWon()\n      setBnbWon(totalWon)\n    }\n\n    if (loadData) {\n      fetchMarketData()\n    }\n  }, [slowRefresh, loadData])\n\n  useEffect(() => {\n    if (bnbBusdPrice.gt(0) && bnbWon > 0) {\n      setBnbWonInUsd(bnbBusdPrice.times(bnbWon).toNumber())\n    }\n  }, [bnbBusdPrice, bnbWon])\n\n  return (\n    <>\n      <Flex flexDirection=\"column\" mt=\"48px\">\n        <div ref={observerRef} />\n        <Text color=\"#280D5F\" bold fontSize=\"16px\">\n          {t('Prediction')}\n        </Text>\n        {bnbWonInUsd ? (\n          <Heading color=\"#280D5F\" my=\"8px\" scale=\"xl\" bold>\n            {pretext}\n            {localisedBnbUsdString}\n          </Heading>\n        ) : (\n          <>\n            <Skeleton width={230} height={40} my=\"8px\" />\n            <div ref={observerRef} />\n          </>\n        )}\n        <Text color=\"#280D5F\" mb=\"24px\" bold fontSize=\"16px\">\n          {wonSoFar}\n        </Text>\n        <Text color=\"#280D5F\" mb=\"40px\">\n          {t('Will BNB price rise or fall? guess correctly to win!')}\n        </Text>\n      </Flex>\n      <Flex alignItems=\"center\" justifyContent=\"center\">\n        <StyledLink href=\"/prediction\" id=\"homepage-prediction-cta\">\n          <Button width=\"100%\">\n            <Text bold color=\"invertedContrast\">\n              {t('Play')}\n            </Text>\n            <ArrowForwardIcon ml=\"4px\" color=\"invertedContrast\" />\n          </Button>\n        </StyledLink>\n      </Flex>\n    </>\n  )\n}\n\nexport default PredictionCardContent\n"]},"metadata":{},"sourceType":"module"}