{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nguyenvanhuan243/Documents/apphocvienstock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nguyenvanhuan243/Documents/apphocvienstock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _taggedTemplateLiteral from\"/Users/nguyenvanhuan243/Documents/apphocvienstock/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React from'react';import{useWeb3React}from'@web3-react/core';import{Box,Flex,Heading,Text,PrizeIcon,BlockIcon,LinkExternal,useTooltip,InfoIcon}from'@pancakeswap/uikit';import styled from'styled-components';import{useAppDispatch}from'state';import{useTranslation}from'contexts/Localization';import{usePriceBnbBusd}from'state/farms/hooks';import{REWARD_RATE}from'state/predictions/config';import{BetPosition}from'state/types';import{fetchLedgerData,markBetHistoryAsCollected}from'state/predictions';import{Result}from'state/predictions/helpers';import{getBscScanLink}from'utils';import useIsRefundable from'../../hooks/useIsRefundable';import{formatBnb,getNetPayout}from'./helpers';import CollectWinningsButton from'../CollectWinningsButton';import PositionTag from'../PositionTag';import ReclaimPositionButton from'../ReclaimPositionButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var StyledBetResult=styled(Box)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  border: 2px solid \",\";\\n  border-radius: 16px;\\n  margin-bottom: 24px;\\n  padding: 16px;\\n\"])),function(_ref){var theme=_ref.theme;return theme.colors.textDisabled;});var Divider=styled.hr(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  border: 1px solid \",\";\\n\"])),function(_ref2){var theme=_ref2.theme;return theme.colors.cardBorder;});var BetResult=function BetResult(_ref3){var bet=_ref3.bet,result=_ref3.result;var _useTranslation=useTranslation(),t=_useTranslation.t;var dispatch=useAppDispatch();var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var _useIsRefundable=useIsRefundable(bet.round.epoch),isRefundable=_useIsRefundable.isRefundable;var bnbBusdPrice=usePriceBnbBusd();var canClaim=!bet.claimed&&bet.position===bet.round.position;var _useTooltip=useTooltip(/*#__PURE__*/_jsx(Text,{as:\"p\",children:t('Includes your original position and your winnings, minus the %fee% fee.',{fee:'3%'})}),{placement:'auto'}),targetRef=_useTooltip.targetRef,tooltip=_useTooltip.tooltip,tooltipVisible=_useTooltip.tooltipVisible;var isWinner=result===Result.WIN;// Winners get the payout, otherwise the claim what they put it if it was canceled\nvar payout=isWinner?getNetPayout(bet,REWARD_RATE):bet.amount;var returned=payout+bet.amount;var getHeaderColor=function getHeaderColor(){switch(result){case Result.WIN:return'warning';case Result.LOSE:return'textSubtle';case Result.CANCELED:return'textDisabled';default:return'text';}};var getHeaderText=function getHeaderText(){switch(result){case Result.WIN:return t('Win');case Result.LOSE:return t('Lose');case Result.CANCELED:return t('Canceled');default:return'';}};var getHeaderIcon=function getHeaderIcon(){switch(result){case Result.WIN:return/*#__PURE__*/_jsx(PrizeIcon,{color:getHeaderColor()});case Result.LOSE:case Result.CANCELED:return/*#__PURE__*/_jsx(BlockIcon,{color:getHeaderColor()});default:return null;}};var getResultColor=function getResultColor(){switch(result){case Result.WIN:return'success';case Result.LOSE:return'failure';case Result.CANCELED:default:return'text';}};var handleSuccess=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// We have to mark the bet as claimed immediately because it does not update fast enough\ndispatch(markBetHistoryAsCollected({account:account,betId:bet.id}));dispatch(fetchLedgerData({account:account,epochs:[bet.round.epoch]}));case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSuccess(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"space-between\",mb:\"8px\",children:[/*#__PURE__*/_jsx(Heading,{children:t('Your History')}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Heading,{as:\"h3\",color:getHeaderColor(),textTransform:\"uppercase\",bold:true,mr:\"4px\",children:getHeaderText()}),getHeaderIcon()]})]}),/*#__PURE__*/_jsxs(StyledBetResult,{children:[result===Result.WIN&&!canClaim&&/*#__PURE__*/_jsx(CollectWinningsButton,{payout:formatBnb(payout),betAmount:bet.amount.toString(),epoch:bet.round.epoch,hasClaimed:!canClaim,width:\"100%\",mb:\"16px\",onSuccess:handleSuccess,children:bet.claimed?t('Already Collected'):t('Collect Winnings')}),bet.claimed&&/*#__PURE__*/_jsx(Flex,{justifyContent:\"center\",children:/*#__PURE__*/_jsx(LinkExternal,{href:getBscScanLink(bet.claimedHash,'transaction'),mb:\"16px\",children:t('View on BscScan')})}),result===Result.CANCELED&&isRefundable&&/*#__PURE__*/_jsx(ReclaimPositionButton,{epoch:bet.round.epoch,width:\"100%\",mb:\"16px\"}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"space-between\",mb:\"16px\",children:[/*#__PURE__*/_jsxs(Text,{children:[t('Your direction'),\":\"]}),/*#__PURE__*/_jsx(PositionTag,{betPosition:bet.position,children:bet.position===BetPosition.BULL?t('Up'):t('Down')})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"space-between\",mb:\"16px\",children:[/*#__PURE__*/_jsx(Text,{children:t('Your position')}),/*#__PURE__*/_jsx(Text,{children:\"\".concat(formatBnb(bet.amount),\" BNB\")})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"start\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(Text,{bold:true,children:[isWinner?t('Your winnings'):t('Your Result'),\":\"]}),/*#__PURE__*/_jsxs(Box,{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(Text,{bold:true,color:getResultColor(),children:\"\".concat(isWinner?'+':'-').concat(formatBnb(payout),\" BNB\")}),/*#__PURE__*/_jsx(Text,{fontSize:\"12px\",color:\"textSubtle\",children:\"~$\".concat(formatBnb(bnbBusdPrice.times(payout).toNumber()))})]})]}),isWinner&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"start\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(Text,{fontSize:\"14px\",color:\"textSubtle\",children:[t('Amount to collect'),\":\"]}),/*#__PURE__*/_jsxs(Flex,{justifyContent:\"end\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"14px\",color:\"textSubtle\",children:\"\".concat(formatBnb(returned),\" BNB\")}),/*#__PURE__*/_jsx(\"span\",{ref:targetRef,children:/*#__PURE__*/_jsx(InfoIcon,{color:\"textSubtle\",ml:\"4px\"})})]}),tooltipVisible&&tooltip]})]})]})]});};export default BetResult;","map":{"version":3,"sources":["/Users/nguyenvanhuan243/Documents/apphocvienstock/src/views/Predictions/components/History/BetResult.tsx"],"names":["React","useWeb3React","Box","Flex","Heading","Text","PrizeIcon","BlockIcon","LinkExternal","useTooltip","InfoIcon","styled","useAppDispatch","useTranslation","usePriceBnbBusd","REWARD_RATE","BetPosition","fetchLedgerData","markBetHistoryAsCollected","Result","getBscScanLink","useIsRefundable","formatBnb","getNetPayout","CollectWinningsButton","PositionTag","ReclaimPositionButton","StyledBetResult","theme","colors","textDisabled","Divider","hr","cardBorder","BetResult","bet","result","t","dispatch","account","round","epoch","isRefundable","bnbBusdPrice","canClaim","claimed","position","fee","placement","targetRef","tooltip","tooltipVisible","isWinner","WIN","payout","amount","returned","getHeaderColor","LOSE","CANCELED","getHeaderText","getHeaderIcon","getResultColor","handleSuccess","betId","id","epochs","toString","claimedHash","BULL","textAlign","times","toNumber"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport { Box, Flex, Heading, Text, PrizeIcon, BlockIcon, LinkExternal, useTooltip, InfoIcon } from '@pancakeswap/uikit'\nimport styled from 'styled-components'\nimport { useAppDispatch } from 'state'\nimport { useTranslation } from 'contexts/Localization'\nimport { usePriceBnbBusd } from 'state/farms/hooks'\nimport { REWARD_RATE } from 'state/predictions/config'\nimport { Bet, BetPosition } from 'state/types'\nimport { fetchLedgerData, markBetHistoryAsCollected } from 'state/predictions'\nimport { Result } from 'state/predictions/helpers'\nimport { getBscScanLink } from 'utils'\nimport useIsRefundable from '../../hooks/useIsRefundable'\nimport { formatBnb, getNetPayout } from './helpers'\nimport CollectWinningsButton from '../CollectWinningsButton'\nimport PositionTag from '../PositionTag'\nimport ReclaimPositionButton from '../ReclaimPositionButton'\n\ninterface BetResultProps {\n  bet: Bet\n  result: Result\n}\n\nconst StyledBetResult = styled(Box)`\n  border: 2px solid ${({ theme }) => theme.colors.textDisabled};\n  border-radius: 16px;\n  margin-bottom: 24px;\n  padding: 16px;\n`\n\nconst Divider = styled.hr`\n  border: 1px solid ${({ theme }) => theme.colors.cardBorder};\n`\n\nconst BetResult: React.FC<BetResultProps> = ({ bet, result }) => {\n  const { t } = useTranslation()\n  const dispatch = useAppDispatch()\n  const { account } = useWeb3React()\n  const { isRefundable } = useIsRefundable(bet.round.epoch)\n  const bnbBusdPrice = usePriceBnbBusd()\n  const canClaim = !bet.claimed && bet.position === bet.round.position\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\n    <Text as=\"p\">{t('Includes your original position and your winnings, minus the %fee% fee.', { fee: '3%' })}</Text>,\n    { placement: 'auto' },\n  )\n\n  const isWinner = result === Result.WIN\n\n  // Winners get the payout, otherwise the claim what they put it if it was canceled\n  const payout = isWinner ? getNetPayout(bet, REWARD_RATE) : bet.amount\n  const returned = payout + bet.amount\n\n  const getHeaderColor = () => {\n    switch (result) {\n      case Result.WIN:\n        return 'warning'\n      case Result.LOSE:\n        return 'textSubtle'\n      case Result.CANCELED:\n        return 'textDisabled'\n      default:\n        return 'text'\n    }\n  }\n\n  const getHeaderText = () => {\n    switch (result) {\n      case Result.WIN:\n        return t('Win')\n      case Result.LOSE:\n        return t('Lose')\n      case Result.CANCELED:\n        return t('Canceled')\n      default:\n        return ''\n    }\n  }\n\n  const getHeaderIcon = () => {\n    switch (result) {\n      case Result.WIN:\n        return <PrizeIcon color={getHeaderColor()} />\n      case Result.LOSE:\n      case Result.CANCELED:\n        return <BlockIcon color={getHeaderColor()} />\n      default:\n        return null\n    }\n  }\n\n  const getResultColor = () => {\n    switch (result) {\n      case Result.WIN:\n        return 'success'\n      case Result.LOSE:\n        return 'failure'\n      case Result.CANCELED:\n      default:\n        return 'text'\n    }\n  }\n\n  const handleSuccess = async () => {\n    // We have to mark the bet as claimed immediately because it does not update fast enough\n    dispatch(markBetHistoryAsCollected({ account, betId: bet.id }))\n    dispatch(fetchLedgerData({ account, epochs: [bet.round.epoch] }))\n  }\n\n  return (\n    <>\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\n        <Heading>{t('Your History')}</Heading>\n        <Flex alignItems=\"center\">\n          <Heading as=\"h3\" color={getHeaderColor()} textTransform=\"uppercase\" bold mr=\"4px\">\n            {getHeaderText()}\n          </Heading>\n          {getHeaderIcon()}\n        </Flex>\n      </Flex>\n      <StyledBetResult>\n        {result === Result.WIN && !canClaim && (\n          <CollectWinningsButton\n            payout={formatBnb(payout)}\n            betAmount={bet.amount.toString()}\n            epoch={bet.round.epoch}\n            hasClaimed={!canClaim}\n            width=\"100%\"\n            mb=\"16px\"\n            onSuccess={handleSuccess}\n          >\n            {bet.claimed ? t('Already Collected') : t('Collect Winnings')}\n          </CollectWinningsButton>\n        )}\n        {bet.claimed && (\n          <Flex justifyContent=\"center\">\n            <LinkExternal href={getBscScanLink(bet.claimedHash, 'transaction')} mb=\"16px\">\n              {t('View on BscScan')}\n            </LinkExternal>\n          </Flex>\n        )}\n        {result === Result.CANCELED && isRefundable && (\n          <ReclaimPositionButton epoch={bet.round.epoch} width=\"100%\" mb=\"16px\" />\n        )}\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\n          <Text>{t('Your direction')}:</Text>\n          <PositionTag betPosition={bet.position}>\n            {bet.position === BetPosition.BULL ? t('Up') : t('Down')}\n          </PositionTag>\n        </Flex>\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"16px\">\n          <Text>{t('Your position')}</Text>\n          <Text>{`${formatBnb(bet.amount)} BNB`}</Text>\n        </Flex>\n        <Flex alignItems=\"start\" justifyContent=\"space-between\">\n          <Text bold>{isWinner ? t('Your winnings') : t('Your Result')}:</Text>\n          <Box style={{ textAlign: 'right' }}>\n            <Text bold color={getResultColor()}>{`${isWinner ? '+' : '-'}${formatBnb(payout)} BNB`}</Text>\n            <Text fontSize=\"12px\" color=\"textSubtle\">\n              {`~$${formatBnb(bnbBusdPrice.times(payout).toNumber())}`}\n            </Text>\n          </Box>\n        </Flex>\n        {isWinner && (\n          <>\n            <Divider />\n            <Flex alignItems=\"start\" justifyContent=\"space-between\">\n              <Text fontSize=\"14px\" color=\"textSubtle\">\n                {t('Amount to collect')}:\n              </Text>\n              <Flex justifyContent=\"end\">\n                <Text fontSize=\"14px\" color=\"textSubtle\">{`${formatBnb(returned)} BNB`}</Text>\n                <span ref={targetRef}>\n                  <InfoIcon color=\"textSubtle\" ml=\"4px\" />\n                </span>\n              </Flex>\n              {tooltipVisible && tooltip}\n            </Flex>\n          </>\n        )}\n      </StyledBetResult>\n    </>\n  )\n}\n\nexport default BetResult\n"]},"metadata":{},"sourceType":"module"}