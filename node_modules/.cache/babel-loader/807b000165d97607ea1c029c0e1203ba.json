{"ast":null,"code":"import{createReducer}from'@reduxjs/toolkit';import{INITIAL_ALLOWED_SLIPPAGE,DEFAULT_DEADLINE_FROM_NOW}from'../../config/constants';import{updateVersion}from'../global/actions';import{addSerializedPair,addSerializedToken,removeSerializedPair,removeSerializedToken,updateUserExpertMode,updateUserSlippageTolerance,updateUserDeadline,updateUserSingleHopOnly,updateGasPrice,muteAudio,unmuteAudio,toggleTheme,updateUserFarmStakedOnly,FarmStakedOnly}from'./actions';import{GAS_PRICE_GWEI}from'./hooks/helpers';var currentTimestamp=function currentTimestamp(){return new Date().getTime();};function pairKey(token0Address,token1Address){return\"\".concat(token0Address,\";\").concat(token1Address);}export var initialState={userExpertMode:false,userSingleHopOnly:false,userSlippageTolerance:INITIAL_ALLOWED_SLIPPAGE,userDeadline:DEFAULT_DEADLINE_FROM_NOW,tokens:{},pairs:{},timestamp:currentTimestamp(),audioPlay:true,isDark:false,userFarmStakedOnly:FarmStakedOnly.ON_FINISHED,gasPrice:GAS_PRICE_GWEI.default};export default createReducer(initialState,function(builder){return builder.addCase(updateVersion,function(state){// slippage isnt being tracked in local storage, reset to default\n// noinspection SuspiciousTypeOfGuard\nif(typeof state.userSlippageTolerance!=='number'){state.userSlippageTolerance=INITIAL_ALLOWED_SLIPPAGE;}// deadline isnt being tracked in local storage, reset to default\n// noinspection SuspiciousTypeOfGuard\nif(typeof state.userDeadline!=='number'){state.userDeadline=DEFAULT_DEADLINE_FROM_NOW;}state.lastUpdateVersionTimestamp=currentTimestamp();}).addCase(updateUserExpertMode,function(state,action){state.userExpertMode=action.payload.userExpertMode;state.timestamp=currentTimestamp();}).addCase(updateUserSlippageTolerance,function(state,action){state.userSlippageTolerance=action.payload.userSlippageTolerance;state.timestamp=currentTimestamp();}).addCase(updateUserDeadline,function(state,action){state.userDeadline=action.payload.userDeadline;state.timestamp=currentTimestamp();}).addCase(updateUserSingleHopOnly,function(state,action){state.userSingleHopOnly=action.payload.userSingleHopOnly;}).addCase(addSerializedToken,function(state,_ref){var serializedToken=_ref.payload.serializedToken;if(!state.tokens){state.tokens={};}state.tokens[serializedToken.chainId]=state.tokens[serializedToken.chainId]||{};state.tokens[serializedToken.chainId][serializedToken.address]=serializedToken;state.timestamp=currentTimestamp();}).addCase(removeSerializedToken,function(state,_ref2){var _ref2$payload=_ref2.payload,address=_ref2$payload.address,chainId=_ref2$payload.chainId;if(!state.tokens){state.tokens={};}state.tokens[chainId]=state.tokens[chainId]||{};delete state.tokens[chainId][address];state.timestamp=currentTimestamp();}).addCase(addSerializedPair,function(state,_ref3){var serializedPair=_ref3.payload.serializedPair;if(serializedPair.token0.chainId===serializedPair.token1.chainId&&serializedPair.token0.address!==serializedPair.token1.address){var _chainId=serializedPair.token0.chainId;state.pairs[_chainId]=state.pairs[_chainId]||{};state.pairs[_chainId][pairKey(serializedPair.token0.address,serializedPair.token1.address)]=serializedPair;}state.timestamp=currentTimestamp();}).addCase(removeSerializedPair,function(state,_ref4){var _ref4$payload=_ref4.payload,chainId=_ref4$payload.chainId,tokenAAddress=_ref4$payload.tokenAAddress,tokenBAddress=_ref4$payload.tokenBAddress;if(state.pairs[chainId]){// just delete both keys if either exists\ndelete state.pairs[chainId][pairKey(tokenAAddress,tokenBAddress)];delete state.pairs[chainId][pairKey(tokenBAddress,tokenAAddress)];}state.timestamp=currentTimestamp();}).addCase(muteAudio,function(state){state.audioPlay=false;}).addCase(unmuteAudio,function(state){state.audioPlay=true;}).addCase(toggleTheme,function(state){state.isDark=!state.isDark;}).addCase(updateUserFarmStakedOnly,function(state,_ref5){var userFarmStakedOnly=_ref5.payload.userFarmStakedOnly;state.userFarmStakedOnly=userFarmStakedOnly;}).addCase(updateGasPrice,function(state,action){state.gasPrice=action.payload.gasPrice;});});","map":{"version":3,"sources":["/Users/nguyenvanhuan243/Documents/apphocvienstock/src/state/user/reducer.ts"],"names":["createReducer","INITIAL_ALLOWED_SLIPPAGE","DEFAULT_DEADLINE_FROM_NOW","updateVersion","addSerializedPair","addSerializedToken","removeSerializedPair","removeSerializedToken","updateUserExpertMode","updateUserSlippageTolerance","updateUserDeadline","updateUserSingleHopOnly","updateGasPrice","muteAudio","unmuteAudio","toggleTheme","updateUserFarmStakedOnly","FarmStakedOnly","GAS_PRICE_GWEI","currentTimestamp","Date","getTime","pairKey","token0Address","token1Address","initialState","userExpertMode","userSingleHopOnly","userSlippageTolerance","userDeadline","tokens","pairs","timestamp","audioPlay","isDark","userFarmStakedOnly","ON_FINISHED","gasPrice","default","builder","addCase","state","lastUpdateVersionTimestamp","action","payload","serializedToken","chainId","address","serializedPair","token0","token1","tokenAAddress","tokenBAddress"],"mappings":"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","sourcesContent":["import { createReducer } from '@reduxjs/toolkit'\nimport { INITIAL_ALLOWED_SLIPPAGE, DEFAULT_DEADLINE_FROM_NOW } from '../../config/constants'\nimport { updateVersion } from '../global/actions'\nimport {\n  addSerializedPair,\n  addSerializedToken,\n  removeSerializedPair,\n  removeSerializedToken,\n  SerializedPair,\n  SerializedToken,\n  updateUserExpertMode,\n  updateUserSlippageTolerance,\n  updateUserDeadline,\n  updateUserSingleHopOnly,\n  updateGasPrice,\n  muteAudio,\n  unmuteAudio,\n  toggleTheme,\n  updateUserFarmStakedOnly,\n  FarmStakedOnly,\n} from './actions'\nimport { GAS_PRICE_GWEI } from './hooks/helpers'\n\nconst currentTimestamp = () => new Date().getTime()\n\nexport interface UserState {\n  // the timestamp of the last updateVersion action\n  lastUpdateVersionTimestamp?: number\n\n  userExpertMode: boolean\n\n  // only allow swaps on direct pairs\n  userSingleHopOnly: boolean\n\n  // user defined slippage tolerance in bips, used in all txns\n  userSlippageTolerance: number\n\n  // deadline set by user in minutes, used in all txns\n  userDeadline: number\n\n  tokens: {\n    [chainId: number]: {\n      [address: string]: SerializedToken\n    }\n  }\n\n  pairs: {\n    [chainId: number]: {\n      // keyed by token0Address:token1Address\n      [key: string]: SerializedPair\n    }\n  }\n\n  timestamp: number\n  audioPlay: boolean\n  isDark: boolean\n  userFarmStakedOnly: FarmStakedOnly\n  gasPrice: string\n}\n\nfunction pairKey(token0Address: string, token1Address: string) {\n  return `${token0Address};${token1Address}`\n}\n\nexport const initialState: UserState = {\n  userExpertMode: false,\n  userSingleHopOnly: false,\n  userSlippageTolerance: INITIAL_ALLOWED_SLIPPAGE,\n  userDeadline: DEFAULT_DEADLINE_FROM_NOW,\n  tokens: {},\n  pairs: {},\n  timestamp: currentTimestamp(),\n  audioPlay: true,\n  isDark: false,\n  userFarmStakedOnly: FarmStakedOnly.ON_FINISHED,\n  gasPrice: GAS_PRICE_GWEI.default,\n}\n\nexport default createReducer(initialState, (builder) =>\n  builder\n    .addCase(updateVersion, (state) => {\n      // slippage isnt being tracked in local storage, reset to default\n      // noinspection SuspiciousTypeOfGuard\n      if (typeof state.userSlippageTolerance !== 'number') {\n        state.userSlippageTolerance = INITIAL_ALLOWED_SLIPPAGE\n      }\n\n      // deadline isnt being tracked in local storage, reset to default\n      // noinspection SuspiciousTypeOfGuard\n      if (typeof state.userDeadline !== 'number') {\n        state.userDeadline = DEFAULT_DEADLINE_FROM_NOW\n      }\n\n      state.lastUpdateVersionTimestamp = currentTimestamp()\n    })\n    .addCase(updateUserExpertMode, (state, action) => {\n      state.userExpertMode = action.payload.userExpertMode\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserSlippageTolerance, (state, action) => {\n      state.userSlippageTolerance = action.payload.userSlippageTolerance\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserDeadline, (state, action) => {\n      state.userDeadline = action.payload.userDeadline\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(updateUserSingleHopOnly, (state, action) => {\n      state.userSingleHopOnly = action.payload.userSingleHopOnly\n    })\n    .addCase(addSerializedToken, (state, { payload: { serializedToken } }) => {\n      if (!state.tokens) {\n        state.tokens = {}\n      }\n      state.tokens[serializedToken.chainId] = state.tokens[serializedToken.chainId] || {}\n      state.tokens[serializedToken.chainId][serializedToken.address] = serializedToken\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(removeSerializedToken, (state, { payload: { address, chainId } }) => {\n      if (!state.tokens) {\n        state.tokens = {}\n      }\n      state.tokens[chainId] = state.tokens[chainId] || {}\n      delete state.tokens[chainId][address]\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(addSerializedPair, (state, { payload: { serializedPair } }) => {\n      if (\n        serializedPair.token0.chainId === serializedPair.token1.chainId &&\n        serializedPair.token0.address !== serializedPair.token1.address\n      ) {\n        const { chainId } = serializedPair.token0\n        state.pairs[chainId] = state.pairs[chainId] || {}\n        state.pairs[chainId][pairKey(serializedPair.token0.address, serializedPair.token1.address)] = serializedPair\n      }\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(removeSerializedPair, (state, { payload: { chainId, tokenAAddress, tokenBAddress } }) => {\n      if (state.pairs[chainId]) {\n        // just delete both keys if either exists\n        delete state.pairs[chainId][pairKey(tokenAAddress, tokenBAddress)]\n        delete state.pairs[chainId][pairKey(tokenBAddress, tokenAAddress)]\n      }\n      state.timestamp = currentTimestamp()\n    })\n    .addCase(muteAudio, (state) => {\n      state.audioPlay = false\n    })\n    .addCase(unmuteAudio, (state) => {\n      state.audioPlay = true\n    })\n    .addCase(toggleTheme, (state) => {\n      state.isDark = !state.isDark\n    })\n    .addCase(updateUserFarmStakedOnly, (state, { payload: { userFarmStakedOnly } }) => {\n      state.userFarmStakedOnly = userFarmStakedOnly\n    })\n    .addCase(updateGasPrice, (state, action) => {\n      state.gasPrice = action.payload.gasPrice\n    }),\n)\n"]},"metadata":{},"sourceType":"module"}